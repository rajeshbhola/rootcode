---
layout: default
---

<div class="reading-progress-bar"></div>

<article class="post detailed">
  <h1>{{ page.title }}</h1>

  {% if page.categories.size > 0 or page.tags.size > 0 %}
  <div class="post-meta-tags">
    {% if page.categories.size > 0 %}
      {% for category in page.categories %}
      <a href="{{ site.baseurl }}/categories#{{ category | slugify }}" class="category-badge">{{ category }}</a>
      {% endfor %}
    {% endif %}

    {% if page.tags.size > 0 %}
      {% for tag in page.tags %}
      <a href="{{ site.baseurl }}/tags#{{ tag | slugify }}" class="tag-badge">{{ tag }}</a>
      {% endfor %}
    {% endif %}
  </div>
  {% endif %}

  <div class="author-meta">
    <img src="{{ site.author_image }}" alt="{{ site.author }}" class="author-image" />
    <div class="author-info">
      <p class="author_title">{{site.author}}  ¬∑  {{ page.date | date: "%B %e, %Y" }}</p>
      {% if page.last_modified_at %}
      <p class="author_title">Updated:  {{ page.last_modified_at | date: "%B %e, %Y" }}</p>
      {% endif %}
    </div>
  </div>

  <div class="entry">
    {{ content }}
  </div>

  {% if page.youtube_video_id %}
  <div class="post-video-section">
    <div class="video-header">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z"></path>
        <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
      </svg>
      <h3>Watch the Video</h3>
    </div>
    <div class="video-wrapper">
      <iframe
        src="https://www.youtube.com/embed/{{ page.youtube_video_id }}"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        loading="lazy">
      </iframe>
    </div>
    {% if page.youtube_description %}
    <p class="video-description">{{ page.youtube_description }}</p>
    {% endif %}
  </div>
  {% endif %}

  <hr class="post-content-separator" />

  {% if page.categories.size > 0 or page.tags.size > 0 %}
  <div class="post-footer-taxonomy">
    {% if page.categories.size > 0 %}
    <div class="taxonomy-section">
      <h4 class="taxonomy-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
        </svg>
        Categories
      </h4>
      <div class="taxonomy-items">
        {% for category in page.categories %}
        <a href="javascript:void(0);" class="taxonomy-badge category-badge-footer" data-category="{{ category | slugify }}" data-category-name="{{ category }}">
          {{ category }}
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}

    {% if page.tags.size > 0 %}
    <div class="taxonomy-section">
      <h4 class="taxonomy-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
          <line x1="7" y1="7" x2="7.01" y2="7"></line>
        </svg>
        Tags
      </h4>
      <div class="taxonomy-items">
        {% for tag in page.tags %}
        <a href="{{ site.baseurl }}/tags#{{ tag | slugify }}" class="taxonomy-badge tag-badge-footer">
          {{ tag }}
        </a>
        {% endfor %}
      </div>
    </div>
    {% endif %}
  </div>

  <!-- Category Modal for Post Footer -->
  <div class="post-category-modal" id="post-category-modal" style="display: none;">
    <div class="category-modal-overlay"></div>
    <div class="category-modal-content">
      <div class="category-modal-header">
        <div class="category-modal-title">
          <span class="category-icon">üìÅ</span>
          <h2 id="modal-category-title"></h2>
          <span class="category-modal-count" id="modal-category-count"></span>
        </div>
        <button class="category-modal-close" aria-label="Close">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>
      <div class="category-modal-posts" id="modal-posts-container">
        <!-- Posts will be loaded here via JavaScript -->
      </div>
    </div>
  </div>

  <script>
  (function() {
    'use strict';

    // Category posts data
    const categoryPosts = {
      {% for category in site.categories %}
      '{{ category[0] | slugify }}': {
        name: '{{ category[0] }}',
        posts: [
          {% assign posts = category[1] | sort: 'date' | reverse %}
          {% for post in posts %}
          {
            title: {{ post.title | jsonify }},
            url: '{{ site.baseurl }}{{ post.url }}',
            date: '{{ post.date | date: "%B %d, %Y" }}',
            excerpt: {{ post.excerpt | strip_html | truncatewords: 20 | jsonify }},
            tags: [{% for tag in post.tags %}'{{ tag }}'{% unless forloop.last %},{% endunless %}{% endfor %}]
          }{% unless forloop.last %},{% endunless %}
          {% endfor %}
        ]
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    };

    const modal = document.getElementById('post-category-modal');
    const modalTitle = document.getElementById('modal-category-title');
    const modalCount = document.getElementById('modal-category-count');
    const modalPostsContainer = document.getElementById('modal-posts-container');
    const closeBtn = modal.querySelector('.category-modal-close');
    const overlay = modal.querySelector('.category-modal-overlay');

    // Category badge click handlers
    const categoryBadges = document.querySelectorAll('.category-badge-footer[data-category]');

    categoryBadges.forEach(badge => {
      badge.addEventListener('click', function(e) {
        e.preventDefault();
        const categorySlug = this.getAttribute('data-category');
        const categoryData = categoryPosts[categorySlug];

        if (categoryData) {
          showCategoryModal(categoryData);
        }
      });
    });

    function showCategoryModal(categoryData) {
      modalTitle.textContent = categoryData.name;
      modalCount.textContent = categoryData.posts.length + (categoryData.posts.length === 1 ? ' article' : ' articles');

      // Build posts HTML
      let postsHTML = '';
      categoryData.posts.forEach(post => {
        let tagsHTML = '';
        if (post.tags.length > 0) {
          tagsHTML = '<span class="post-tags-preview">';
          post.tags.slice(0, 2).forEach(tag => {
            tagsHTML += `<span class="mini-tag">${tag}</span>`;
          });
          tagsHTML += '</span>';
        }

        postsHTML += `
          <article class="category-post-card" onclick="window.location='${post.url}'">
            <div class="category-post-content">
              <h4><a href="${post.url}">${post.title}</a></h4>
              <div class="category-post-meta">
                <span class="post-date">${post.date}</span>
                ${tagsHTML}
              </div>
              <p class="category-post-excerpt">${post.excerpt}</p>
            </div>
            <div class="category-post-arrow">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
              </svg>
            </div>
          </article>
        `;
      });

      modalPostsContainer.innerHTML = postsHTML;
      modal.style.display = 'flex';
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      modal.style.display = 'none';
      document.body.style.overflow = '';
    }

    closeBtn.addEventListener('click', closeModal);
    overlay.addEventListener('click', closeModal);

    // Close on ESC key
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && modal.style.display === 'flex') {
        closeModal();
      }
    });
  })();
  </script>
  {% endif %}

  <div class="date">
    Written on {{ page.date | date: "%B %e, %Y" }}
  </div>

  {% assign related_posts = '' | split: '' %}
  {% for category in page.categories %}
    {% for post in site.categories[category] %}
      {% if post.url != page.url %}
        {% assign related_posts = related_posts | push: post %}
      {% endif %}
    {% endfor %}
  {% endfor %}

  {% assign unique_posts = '' | split: '' %}
  {% for post in related_posts %}
    {% unless unique_posts contains post %}
      {% assign unique_posts = unique_posts | push: post %}
    {% endunless %}
  {% endfor %}

  {% assign sorted_posts = unique_posts | sort: 'date' | reverse %}

  {% if sorted_posts.size > 0 %}
  <div class="related-posts">
    <h3>Related Posts</h3>
    <div class="related-posts-grid">
      {% for post in sorted_posts limit:6 %}
      <article class="related-post-card" onclick="window.location='{{ site.baseurl }}{{ post.url }}'">
        <h4><a href="{{ site.baseurl }}{{ post.url }}">{{ post.title }}</a></h4>
        <div class="related-post-meta">
          <span class="post-date">{{ post.date | date: "%B %d, %Y" }}</span>
        </div>
        <p class="related-post-excerpt">{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
      </article>
      {% endfor %}
    </div>
  </div>
  {% endif %}

  {% include disqus.html %}
</article>
